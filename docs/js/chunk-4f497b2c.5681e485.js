(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f497b2c"],{"1dde":function(t,e,o){var n=o("d039"),s=o("b622"),r=o("2d00"),i=s("species");t.exports=function(t){return r>=51||!n((function(){var e=[],o=e.constructor={};return o[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},8418:function(t,e,o){"use strict";var n=o("c04e"),s=o("9bf2"),r=o("5c6c");t.exports=function(t,e,o){var i=n(e);i in t?s.f(t,i,r(0,o)):t[i]=o}},"96f2":function(t,e,o){"use strict";o.d(e,"g",(function(){return s})),o.d(e,"b",(function(){return r})),o.d(e,"d",(function(){return i})),o.d(e,"e",(function(){return c})),o.d(e,"c",(function(){return a})),o.d(e,"f",(function(){return u})),o.d(e,"a",(function(){return l}));var n=o("1bab");function s(){return Object(n["a"])({method:"get",url:"/rooms"})}function r(t,e){return Object(n["a"])({method:"post",url:"/".concat(t),data:e})}function i(t){return Object(n["a"])({method:"get",url:"/enterpublic",params:{roomId:t}})}function c(t,e){return Object(n["a"])({method:"post",url:"/enterprivate",data:{roomId:t,password:e}})}function a(t){return Object(n["a"])({method:"get",url:"/deleteRoom",params:{roomId:t}})}function u(){return Object(n["a"])({method:"get",url:"/editor",params:{userId:sessionStorage.getItem("userId")}})}function l(t){return Object(n["a"])({method:"post",url:"/editing",data:t})}},ae40:function(t,e,o){var n=o("83ab"),s=o("d039"),r=o("5135"),i=Object.defineProperty,c={},a=function(t){throw t};t.exports=function(t,e){if(r(c,t))return c[t];e||(e={});var o=[][t],u=!!r(e,"ACCESSORS")&&e.ACCESSORS,l=r(e,0)?e[0]:a,d=r(e,1)?e[1]:void 0;return c[t]=!!o&&!s((function(){if(u&&!n)return!0;var t={length:-1};u?i(t,1,{enumerable:!0,get:a}):t[1]=1,o.call(t,l,d)}))}},b737:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"watch_page"},[o("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{id:"vedio",playsinline:!0,options:t.playerOptions}}),o("div",{staticClass:"operate"},[o("span",{staticClass:"operate_box",on:{click:t.goHome}},[t._v("退出房间")]),o("span",{staticClass:"operate_box",on:{click:function(e){return t.delRoom(t.room.roomId)}}},[t._v("解散房间")])]),o("div",{attrs:{id:"welcome"}},[t._v("来和大家聊聊~")]),o("div",{staticClass:"chat_box"},[o("div",{staticClass:"chat_msg"},t._l(t.chat_msg,(function(e,n){return o("div",{key:n,staticClass:"item.text"},[o("div",{staticClass:"item_name"},[t._v(t._s(e.name))]),o("div",{staticClass:"item_text"},[t._v(t._s(e.text))])])})),0),o("div",{staticClass:"chat_my"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.my_ipt,expression:"my_ipt"}],staticClass:"my_text",attrs:{type:"text"},domProps:{value:t.my_ipt},on:{input:function(e){e.target.composing||(t.my_ipt=e.target.value)}}}),o("input",{staticClass:"my_sub",attrs:{type:"submit",value:"发送"},on:{click:t.subMsg}})])])],1)},s=[],r=(o("fb6a"),o("96f2")),i={data:function(){return{isConnect:!1,room:{},my_ipt:"",chat_msg:[],playerOptions:{autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"4:3",fluid:!0,sources:[{type:"application/x-mpegURL"}],live:!0,width:document.documentElement.clientWidth,notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}}}},mounted:function(){this.room=this.$route.params.room,this.room.movie.src=this.room.movie.src.slice(23),this.playerOptions.sources[0].src=this.room.movie.src,this.initWebsocket()},methods:{delRoom:function(t){var e=this;Object(r["c"])(t).then((function(t){if(!t.data.success)return alert(t.data.Msg);e.websocket.send(JSON.stringify({msg:"房间已被".concat(e.$store.state.user.userName,"解散，即将返回首页!")}))}))},goHome:function(){this.isConnect=!1,this.websocket.close(),this.$router.push("/user")},subMsg:function(){return sessionStorage.getItem("userName")?this.my_ipt?(this.websocket.send(JSON.stringify({text:this.my_ipt,name:sessionStorage.getItem("userName")})),void(this.my_ipt="")):alert("发送内容不能为空哟~"):alert("请先登录！")},initWebsocket:function(){var t=this,e="wss://47.97.214.211/chat/".concat(this.room.roomId);"WebSocket"in window&&!this.isConnect?(this.websocket=new WebSocket(e),this.isConnect=!0):alert(" Not support websocket"),this.websocket.onmessage=function(e){var o=JSON.parse(e.data);if(!o.msg)return t.chat_msg.push(o);alert(o.msg),t.isConnect=!1,t.websocket.close(),t.$router.push("/user")},this.websocket.onclose=function(){console.log("WebSocket连接关闭")},this.websocket.onerror=function(){this.connect&&(this.websocket=new WebSocket(e))},window.onbeforeunload=function(){this.websocket.close()},this.$router.beforeEach((function(e,o,n){t.websocket.close(),n()}))}}},c=i,a=(o("c595"),o("2877")),u=Object(a["a"])(c,n,s,!1,null,"23c4289b",null);e["default"]=u.exports},c595:function(t,e,o){"use strict";var n=o("cc85"),s=o.n(n);s.a},cc85:function(t,e,o){},e8b5:function(t,e,o){var n=o("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}},fb6a:function(t,e,o){"use strict";var n=o("23e7"),s=o("861d"),r=o("e8b5"),i=o("23cb"),c=o("50c4"),a=o("fc6a"),u=o("8418"),l=o("b622"),d=o("1dde"),m=o("ae40"),f=d("slice"),p=m("slice",{ACCESSORS:!0,0:0,1:2}),h=l("species"),b=[].slice,v=Math.max;n({target:"Array",proto:!0,forced:!f||!p},{slice:function(t,e){var o,n,l,d=a(this),m=c(d.length),f=i(t,m),p=i(void 0===e?m:e,m);if(r(d)&&(o=d.constructor,"function"!=typeof o||o!==Array&&!r(o.prototype)?s(o)&&(o=o[h],null===o&&(o=void 0)):o=void 0,o===Array||void 0===o))return b.call(d,f,p);for(n=new(void 0===o?Array:o)(v(p-f,0)),l=0;f<p;f++,l++)f in d&&u(n,l,d[f]);return n.length=l,n}})}}]);
//# sourceMappingURL=chunk-4f497b2c.5681e485.js.map