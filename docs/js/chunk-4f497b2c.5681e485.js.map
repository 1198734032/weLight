{"version":3,"sources":["webpack:///./node_modules/core-js/internals/array-method-has-species-support.js","webpack:///./node_modules/core-js/internals/create-property.js","webpack:///./src/network/userAll/userAll.js","webpack:///./node_modules/core-js/internals/array-method-uses-to-length.js","webpack:///./src/views/user/watchPage.vue?2f65","webpack:///src/views/user/watchPage.vue","webpack:///./src/views/user/watchPage.vue?060c","webpack:///./src/views/user/watchPage.vue","webpack:///./src/views/user/watchPage.vue?77ae","webpack:///./node_modules/core-js/internals/is-array.js","webpack:///./node_modules/core-js/modules/es.array.slice.js"],"names":["fails","wellKnownSymbol","V8_VERSION","SPECIES","module","exports","METHOD_NAME","array","constructor","foo","Boolean","toPrimitive","definePropertyModule","createPropertyDescriptor","object","key","value","propertyKey","f","getRoom","request","method","url","createRoom","data","enterPublic","id","params","roomId","enterprivate","password","deleteRoom","getInformation","userId","sessionStorage","getItem","changeInformation","DESCRIPTORS","has","defineProperty","Object","cache","thrower","it","options","ACCESSORS","argument0","argument1","undefined","O","length","enumerable","get","call","render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","playerOptions","on","goHome","_v","$event","delRoom","room","_l","item","index","_s","name","text","directives","rawName","expression","domProps","target","composing","my_ipt","subMsg","staticRenderFns","isConnect","chat_msg","autoplay","muted","loop","preload","language","aspectRatio","fluid","sources","type","live","width","document","documentElement","clientWidth","notSupportedMessage","controlBar","durationDisplay","remainingTimeDisplay","fullscreenToggle","mounted","$route","movie","src","slice","initWebsocket","methods","res","success","alert","Msg","websocket","close","$router","push","send","window","WebSocket","onmessage","msg","onclose","console","log","onerror","connect","onbeforeunload","beforeEach","next","component","classof","Array","isArray","arg","$","isObject","toAbsoluteIndex","toLength","toIndexedObject","createProperty","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","0","1","nativeSlice","max","Math","proto","forced","start","end","Constructor","result","n","k","fin","prototype"],"mappings":"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","file":"js/chunk-4f497b2c.5681e485.js","sourcesContent":["var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","import { request } from \"@/network/request.js\"\r\n\r\nexport function getRoom() {\r\n    return request({\r\n        method: \"get\",\r\n        url: \"/rooms\"\r\n    })\r\n}\r\n\r\nexport function createRoom(url, data) {\r\n    return request({\r\n        method: \"post\",\r\n        url: `/${url}`,\r\n        data: data\r\n    })\r\n}\r\n\r\nexport function enterPublic(id, password = \"\") {\r\n    return request({\r\n        method: \"get\",\r\n        url: \"/enterpublic\",\r\n        params: {\r\n            roomId: id\r\n        }\r\n    })\r\n}\r\n\r\nexport function enterprivate(id, password) {\r\n    return request({\r\n        method: \"post\",\r\n        url: \"/enterprivate\",\r\n        data: {\r\n            roomId: id,\r\n            password: password\r\n        }\r\n    })\r\n}\r\n\r\nexport function deleteRoom(roomId) {\r\n    return request({\r\n        method: 'get',\r\n        url: '/deleteRoom',\r\n        params: {\r\n            roomId\r\n        }\r\n    })\r\n}\r\n\r\nexport function getInformation(){\r\n    return request({\r\n        method:'get',\r\n        url:'/editor',\r\n        params:{\r\n            userId:sessionStorage.getItem('userId')\r\n        }\r\n    })\r\n}\r\n\r\nexport function changeInformation(data){\r\n    return request({\r\n        method:'post',\r\n        url:'/editing',\r\n        data:data\r\n    })\r\n}","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\n\nvar defineProperty = Object.defineProperty;\nvar cache = {};\n\nvar thrower = function (it) { throw it; };\n\nmodule.exports = function (METHOD_NAME, options) {\n  if (has(cache, METHOD_NAME)) return cache[METHOD_NAME];\n  if (!options) options = {};\n  var method = [][METHOD_NAME];\n  var ACCESSORS = has(options, 'ACCESSORS') ? options.ACCESSORS : false;\n  var argument0 = has(options, 0) ? options[0] : thrower;\n  var argument1 = has(options, 1) ? options[1] : undefined;\n\n  return cache[METHOD_NAME] = !!method && !fails(function () {\n    if (ACCESSORS && !DESCRIPTORS) return true;\n    var O = { length: -1 };\n\n    if (ACCESSORS) defineProperty(O, 1, { enumerable: true, get: thrower });\n    else O[1] = 1;\n\n    method.call(O, argument0, argument1);\n  });\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"watch_page\"},[_c('video-player',{ref:\"videoPlayer\",staticClass:\"video-player vjs-custom-skin\",attrs:{\"id\":\"vedio\",\"playsinline\":true,\"options\":_vm.playerOptions}}),_c('div',{staticClass:\"operate\"},[_c('span',{staticClass:\"operate_box\",on:{\"click\":_vm.goHome}},[_vm._v(\"退出房间\")]),_c('span',{staticClass:\"operate_box\",on:{\"click\":function($event){return _vm.delRoom(_vm.room.roomId)}}},[_vm._v(\"解散房间\")])]),_c('div',{attrs:{\"id\":\"welcome\"}},[_vm._v(\"来和大家聊聊~\")]),_c('div',{staticClass:\"chat_box\"},[_c('div',{staticClass:\"chat_msg\"},_vm._l((_vm.chat_msg),function(item,index){return _c('div',{key:index,staticClass:\"item.text\"},[_c('div',{staticClass:\"item_name\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"item_text\"},[_vm._v(_vm._s(item.text))])])}),0),_c('div',{staticClass:\"chat_my\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.my_ipt),expression:\"my_ipt\"}],staticClass:\"my_text\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.my_ipt)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.my_ipt=$event.target.value}}}),_c('input',{staticClass:\"my_sub\",attrs:{\"type\":\"submit\",\"value\":\"发送\"},on:{\"click\":_vm.subMsg}})])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"watch_page\">\r\n    <!-- <video width=\"100%\" controls id=\"video\">\r\n      <source ref=\"video\" />\r\n    </video> -->\r\n    <video-player\r\n          ref=\"videoPlayer\"\r\n          class=\"video-player vjs-custom-skin\"\r\n          id=\"vedio\"\r\n          :playsinline=\"true\"\r\n          :options=\"playerOptions\"\r\n    />\r\n    <div class=\"operate\">\r\n      <span @click=\"goHome\" class=\"operate_box\">退出房间</span>\r\n      <span @click=\"delRoom(room.roomId)\" class=\"operate_box\">解散房间</span>\r\n    </div>\r\n    <div id=\"welcome\">来和大家聊聊~</div>\r\n    <div class=\"chat_box\">\r\n      <div class=\"chat_msg\">\r\n        <div v-for=\"(item,index) in chat_msg\" :key=\"index\" class=\"item.text\">\r\n          <div class=\"item_name\">{{item.name}}</div>\r\n          <div class=\"item_text\">{{item.text}}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"chat_my\">\r\n        <input type=\"text\" v-model=\"my_ipt\" class=\"my_text\" />\r\n        <input type=\"submit\" value=\"发送\" @click=\"subMsg\" class=\"my_sub\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n \r\n<script>\r\nimport { deleteRoom } from \"@/network/userAll/userAll.js\";\r\n// import 'video.js/dist/video-js.css'\r\n \r\n// import { videoPlayer } from 'vue-videos-player'\r\n\r\nexport default {\r\n  //  components: {\r\n  //   videoPlayer\r\n  // },\r\n  data() {\r\n    return {\r\n      isConnect: false,\r\n      room: {},\r\n      my_ipt: \"\",\r\n      chat_msg: [\r\n        // {\r\n        //   text:\"按吧按吧按吧按吧\",\r\n        //   name:\"tyh\"\r\n        // },\r\n      ],\r\n     playerOptions: {\r\n        autoplay: false, // 如果true,浏览器准备好时开始回放。\r\n        muted: false, // 默认情况下将会消除任何音频。\r\n        loop: false, // 导致视频一结束就重新开始。\r\n        preload: 'auto', // 建议浏览器在<video>加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）\r\n        language: 'zh-CN',\r\n        aspectRatio: '4:3', // 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如\"16:9\"或\"4:3\"）\r\n        fluid: true, // 当true时，Video.js player将拥有流体大小。换句话说，它将按比例缩放以适应其容器。\r\n        sources: [{\r\n          type: \"application/x-mpegURL\", // 这里的种类支持很多种：基本视频格式、直播、流媒体等，具体可以参看git网址项目\r\n          // type:'video/mp4',\r\n          // src: 'http://ivi.bupt.edu.cn/hls/cctv1.m3u8'// 视频url地址 \r\n          // src:'/hls/1233.m3u8'\r\n          // src:\"\"\r\n        }],\r\n        live:true,\r\n        width: document.documentElement.clientWidth, //播放器宽度\r\n        notSupportedMessage: '此视频暂无法播放，请稍后再试', // 允许覆盖Video.js无法播放媒体源时显示的默认信息。\r\n        controlBar: {\r\n          // timeDivider: true,\r\n          durationDisplay: true,\r\n          remainingTimeDisplay: false,\r\n          fullscreenToggle: true // 全屏按钮\r\n        }\r\n\r\n      }\r\n    };\r\n  },\r\n\r\n  //加载电影资源，建立websocket链接\r\n  mounted: function () {\r\n    this.room = this.$route.params.room;\r\n    // this.$refs.video.src = this.room.movie.src;\r\n    \r\n    this.room.movie.src = this.room.movie.src.slice(23);\r\n    // console.log(\"src-------\"+this.room.movie.src);\r\n    this.playerOptions.sources[0].src=this.room.movie.src;\r\n    this.initWebsocket();\r\n  },\r\n\r\n  methods: {\r\n    //解散房间\r\n    delRoom(roomId) {\r\n      deleteRoom(roomId).then((res) => {\r\n        if (!res.data.success) return alert(res.data.Msg);\r\n        //通知正在房间的人房间解散\r\n        this.websocket.send(\r\n        JSON.stringify({\r\n         msg:`房间已被${this.$store.state.user.userName}解散，即将返回首页!`\r\n        })\r\n      );\r\n        // alert(res.data.Msg + \"即将返回首页\");\r\n        // this.isConnect = false;\r\n        // this.websocket.close();\r\n        // this.$router.push(\"/user\");\r\n      });\r\n    },\r\n\r\n    //退出房间\r\n    goHome() {\r\n      this.isConnect = false;\r\n      this.websocket.close();\r\n      this.$router.push(\"/user\");\r\n    },\r\n\r\n    //聊天\r\n    subMsg() {\r\n      if (!sessionStorage.getItem('userName')) return alert(\"请先登录！\");\r\n      if(!this.my_ipt) return alert(\"发送内容不能为空哟~\")\r\n      this.websocket.send(\r\n        JSON.stringify({\r\n          text: this.my_ipt,\r\n          // name: this.$store.state.user.userName,\r\n          name:sessionStorage.getItem('userName'),\r\n        })\r\n      );\r\n      this.my_ipt = \"\";\r\n    },\r\n\r\n    //建立websocket链接\r\n    initWebsocket() {\r\n      let url = `wss://47.97.214.211/chat/${this.room.roomId}`;\r\n      if (\"WebSocket\" in window && !this.isConnect) {\r\n        this.websocket = new WebSocket(url);\r\n        this.isConnect = true;\r\n      } else {\r\n        alert(\" Not support websocket\");\r\n      }\r\n\r\n      //接收到消息的回调方法\r\n      this.websocket.onmessage = (event) => {\r\n        let data = JSON.parse(event.data);\r\n        if (!data.msg) return this.chat_msg.push(data);\r\n        else {\r\n          alert(data.msg);\r\n          this.isConnect = false;\r\n          this.websocket.close();\r\n          this.$router.push(\"/user\");\r\n        }\r\n      };\r\n\r\n      //连接关闭的回调方法\r\n      this.websocket.onclose = function () {\r\n        console.log(\"WebSocket连接关闭\");\r\n      };\r\n\r\n      //连接发生错误的回调方法\r\n      this.websocket.onerror = function () {\r\n        if (this.connect) this.websocket = new WebSocket(url);\r\n      };\r\n      //监听窗口关闭事件，当窗口关闭时，主动去关闭websocket连接，防止连接还没断开就关闭窗口，server端会抛异常。\r\n      window.onbeforeunload = function () {\r\n        this.websocket.close();\r\n      };\r\n\r\n      this.$router.beforeEach((to, from, next) => {\r\n        this.websocket.close();\r\n        next();\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n \r\n<style scoped>\r\n.watch_page {\r\n  width: 100vw;\r\n  height: 100vh;\r\n  overflow-y: scroll;\r\n  color: white;\r\n  background: linear-gradient(to top, rgb(36, 49, 84), rgb(110, 111, 119));\r\n}\r\n#video {\r\n  background-color: black;\r\n  width: 100%;\r\n  max-height: 250px;\r\n}\r\n#welcome {\r\n  padding: 10px;\r\n  line-height: 25px;\r\n  /* text-align: center; */\r\n}\r\n.operate {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n.operate_box {\r\n  margin: 0 10px;\r\n  padding: 3px 5px;\r\n  border-radius: 5px;\r\n  background-color: rgb(104, 200, 215);\r\n  font-size: 12px;\r\n  cursor: pointer;\r\n}\r\n.chat_my {\r\n  position: absolute;\r\n  bottom: 0;\r\n  right: 0;\r\n  left: 0;\r\n  display: flex;\r\n  padding: 10px;\r\n  justify-content: space-around;\r\n  background-color: rgb(36,49,84);\r\n\r\n}\r\n.my_text {\r\n  line-height: 30px;\r\n  width: 70vw;\r\n  border-radius: 15px;\r\n  border: none;\r\n  padding: 0 10px;\r\n}\r\n.my_sub {\r\n  line-height: 30px;\r\n  border: none;\r\n  border-radius: 15px;\r\n  padding: 0 15px;\r\n  background-color: rgb(104, 200, 215);\r\n  color: white;\r\n}\r\n\r\n.chat_msg {\r\n  padding: 0 10px;\r\n  height: calc(100vh - 250px - 90px);\r\n  overflow-y: scroll;\r\n}\r\n.item_name {\r\n  line-height: 20px;\r\n}\r\n.item_text {\r\n  background-color: rgb(145, 120, 145);\r\n  display: inline-block;\r\n  line-height: 28px;\r\n  letter-spacing: 1px;\r\n  padding: 0 8px;\r\n  border-radius: 14px;\r\n  padding: 0 10px;\r\n  position: relative;\r\n  margin-top: 5px;\r\n}\r\n.item_text::before {\r\n  content: \"\";\r\n  position: absolute;\r\n  left: 8px;\r\n  top: -10px;\r\n  border: 6px solid transparent;\r\n  border-bottom: 6px solid rgb(145, 120, 145);\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./watchPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./watchPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./watchPage.vue?vue&type=template&id=23c4289b&scoped=true&\"\nimport script from \"./watchPage.vue?vue&type=script&lang=js&\"\nexport * from \"./watchPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./watchPage.vue?vue&type=style&index=0&id=23c4289b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"23c4289b\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./watchPage.vue?vue&type=style&index=0&id=23c4289b&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./watchPage.vue?vue&type=style&index=0&id=23c4289b&scoped=true&lang=css&\"","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.github.io/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('slice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = toLength(O.length);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (typeof Constructor == 'function' && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n"],"sourceRoot":""}